<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.movie.mapper.FilmMapper">

    <select id="findLatestFilms" resultType="Film">
        select * from film where is_delete=1 order by film_time desc limit 0,#{count}
    </select>

    <select id="findFilmsByFilmCategory" resultType="Film">
        select film.* from film INNER JOIN film_and_type ON film.film_id=film_and_type.film_id
                                INNER JOIN film_category on film_and_type.category_id=film_category.category_id
            and film.is_delete=1 and film_category.category_id=#{category_id} ORDER BY film.film_time desc LIMIT 0,8
    </select>

    <select id="totalcount" resultType="int">
        select count(*) from film where is_delete=1
        <if test="film_name!=null and film_name!=''">
            and film_name like '%${film_name}%'
        </if>
    </select>

    <select id="findFilms" resultType="Film">
        select * from film where is_delete=1
        <if test="film_name!=null and film_name!=''">
            and film_name like '%${film_name}%'
        </if>
        limit #{pageStart},#{pageSize}
    </select>


</mapper>